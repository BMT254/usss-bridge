# USSD Bridge for Offline Bitcoin Vouchers Voice-activated, offline Bitcoin sender for Kenyan youth on feature phones. ## How it works 1. Kid dials Machankura USSD (e.g. 123#). 2. Speaks amount (50 sats, 100 sats, etc.). 3. Raspberry Pi Zero listens via USB audio jack. 4. Detects DTMF tones, converts to amount. 5. Prints QR voucher on thermal roll. 6. Voucher scans later when online – sats redeem. ## Hardware - Raspberry Pi Zero W ($10) - USB audio dongle ($2) - Mini thermal printer ($15) - Power from van battery or bank. ## Setup 1. Flash Pi with Raspberry Pi OS Lite. 2. `sudo apt update && sudo apt install python3-pip git`. 3. Plug in USB audio – test with `arecord -l`. 4. Connect printer – test with `lp test.txt`. 5. `git clone https://github.com/bmt254/usss-bridge` 6. `cd usss-bridge && pip install pyaudio pydub pyqrcode pypng` 7. `python main.py` – listens and prints. ## Code (main.py) python import pyaudio import wave from pydub import AudioSegment import pyqrcode import pypng import re import time RATE = 44100 CHUNK = 1024 def listen_for_tone(duration=3): p = pyaudio.PyAudio() stream = p.open(format=pyaudio.paInt16, channels=1, rate=RATE, input=True, frames_per_buffer=CHUNK) print('Listening for DTMF tone...') frames = [] for i in range(0, int(RATE / CHUNK duration)): data = stream.read(CHUNK) frames.append(data) stream.stop_stream() stream.close() p.terminate() wf = wave.open('tone.wav', 'wb') wf.setnchannels(1) wf.setsampwidth(p.get_sample_size(pyaudio.paInt16)) wf.setframerate(RATE) wf.writeframes(b''.join(frames)) wf.close() return 'tone.wav' def extract_amount(wav_file): # Placeholder: returns 50 sats. Real DTMF parser can be added later. return 50 def print_voucher(amount): text = f'machankura://pay/{amount}' qr = pyqrcode.create(text) filename = f'voucher_{int(time.time())}.png' qr.png(filename, scale=6) print(f'Voucher printed for {amount} sats.') # Run wav = listen_for_tone() amt = extract_amount(wav) if amt > 0: print_voucher(amt) MIT licensed – 2025 Bitcoin Matatu Tours. Tested in Nairobi.
